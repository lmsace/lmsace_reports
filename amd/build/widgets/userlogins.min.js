/**
 * User logins - chart init.
 *
 * @module     report_lmsace_reports/userlogins
 * @copyright  2023 LMSACE <https://lmsace.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("report_lmsace_reports/widgets/userlogins",["jquery","core/ajax","core/loadingicon","core/chartjs","report_lmsace_reports/main"],(function($,AJAX,LoadIcon){var visitchart=null,loadiconElement=$(".user-login-block .loadiconElement");var showloginChart=function(main,label,datavalue){let ctx=document.getElementById("user-login-chart");if(ctx){let type="line";var bgColor=main.getRandomColors(["c4"],"0.5",!0),borderColor=main.getRandomColors(["c4"]),customConfig={data:{datasets:[{label:userlogins.userlabel}]}};visitchart=main.buildChart(ctx,type,label,datavalue,bgColor,customConfig,borderColor)}},getUserloginRecords=function(filter,userid){filter||(filter="week");var request={methodname:"report_lmsace_reports_get_chart_reports",args:{filter:filter,chartid:"userloginswidget",relatedid:userid}},promise=AJAX.call([request])[0];promise.done((function(result){updateChartData(result)})),LoadIcon.addIconToContainerRemoveOnCompletion(loadiconElement,promise)},updateChartData=function(data){visitchart.data.labels=data.label,visitchart.data.datasets[0].data=data.value,visitchart.update()};return{init:function(main){if("undefined"==typeof userlogins)return null;var label=userlogins.label,datavalue=userlogins.value,userid=userlogins.userid;return showloginChart(main,label,datavalue),$(".user-login-block .dropdown-menu a").click((function(){var selText=$(this).text(),filter=$(this).attr("value");$(this).parents(".dropdown").find("#daterangefiltermenu").html(selText+' <span class="caret"></span>'),getUserloginRecords(filter,userid)})),!0}}}));

//# sourceMappingURL=userlogins.min.js.map