/**
 * Activity progress widgets.
 *
 * @module     report_lmsace_reports/activityprogress
 * @copyright  2023 LMSACE <https://lmsace.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("report_lmsace_reports/widgets/activityprogress",["jquery","core/ajax","core/loadingicon","core/chartjs"],(function($,AJAX,LoadIcon,Chart){var activityprochart=null,loadiconElement=$(".activity-progress-block .loadiconElement");var showActivityProgressChart=function(label,completiondata,enrolmentdata){let ctx=document.getElementById("activity-progress-chart");if(ctx){let config={type:"bar",data:{labels:label,datasets:[{label:courseactivityinfo.completionlabel,data:completiondata,backgroundColor:"rgba(153, 102, 255, 1)",showTooltips:!1},{label:courseactivityinfo.enrolmentlabel,data:enrolmentdata,backgroundColor:"rgba(255, 102, 48, 1)",showTooltips:!1}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!0,text:""}},scales:{y:{beginAtZero:!0}}}};activityprochart=new Chart(ctx,config)}},getActivityProgressReports=function(filter){filter||(filter="today");var request={methodname:"report_lmsace_reports_activity_progress_reports",args:{filter:filter,chartid:"activityprogressinfo"}},promise=AJAX.call([request])[0];promise.done((function(result){updateChartData(result)})),LoadIcon.addIconToContainerRemoveOnCompletion(loadiconElement,promise)},updateChartData=function(data){activityprochart.data.labels=data.label,activityprochart.data.datasets[0].data=data.completiondata,activityprochart.data.datasets[1].data=data.enrolmentsdata,activityprochart.update()};return{init:function(){if("undefined"==typeof courseactivityinfo)return null;var label=courseactivityinfo.label,completiondata=courseactivityinfo.completiondata,enrolmentdata=courseactivityinfo.enrolmentsdata;return showActivityProgressChart(label,completiondata,enrolmentdata),$(".activity-progress-block .dropdown-menu a").click((function(){var selText=$(this).text(),filter=$(this).attr("value");$(this).parents(".dropdown").find("#daterangefiltermenu").html(selText+' <span class="caret"></span>'),getActivityProgressReports(filter)})),null}}}));

//# sourceMappingURL=activityprogress.min.js.map