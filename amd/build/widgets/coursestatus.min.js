/**
 * Course status widget.
 *
 * @module     report_lmsace_reports/coursestatus
 * @copyright  2023 LMSACE <https://lmsace.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("report_lmsace_reports/widgets/coursestatus",["jquery","core/ajax","core/loadingicon"],(function($,AJAX,LoadIcon){var courseStatus=null,loadiconElement=$(".course-status-block .loadiconElement");var getCourseactivityRecords=function(filter){filter||(filter="week");var request={methodname:"report_lmsace_reports_get_chart_reports",args:{filter:filter,chartid:"courseresourceswidget",relatedid:courseresources.courseid}},promise=AJAX.call([request])[0];promise.done((function(result){updateChartData(result)})),LoadIcon.addIconToContainerRemoveOnCompletion(loadiconElement,promise)},updateChartData=function(data){courseStatus.data.labels=data.label,courseStatus.data.datasets[0].data=data.value,courseStatus.update()},showCoursestatusChart=function(main){var ctx=document.getElementById("course-status-chart");if(ctx){let type="pie";var bgColor=main.getRandomColors(["c1","c3","c4","c6"]);courseStatus=main.buildChart(ctx,type,courseresources.label,courseresources.value,bgColor,null)}};return{init:function(main){showCoursestatusChart(main),$(".course-status-block .dropdown-menu a").click((function(){var selText=$(this).text(),filter=$(this).attr("value");$(this).parents(".dropdown").find("#daterangefiltermenu").html(selText+' <span class="caret"></span>'),getCourseactivityRecords(filter)}))}}}));

//# sourceMappingURL=coursestatus.min.js.map