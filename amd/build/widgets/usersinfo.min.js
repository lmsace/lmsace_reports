/**
 * User information - chart init.
 *
 * @module     report_lmsace_reports/usersinfo
 * @copyright  2023 LMSACE <https://lmsace.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("report_lmsace_reports/widgets/usersinfo",["jquery","core/ajax","core/loadingicon"],(function($,AJAX,LoadIcon){var userinfochart=null,loadiconElement=$(".user-info-block .loadiconElement");var showVisitChart=function(main,label,datavalue){let ctx=document.getElementById("user-info-chart");if(ctx){let type="doughnut";var bgColor=main.getRandomColors(["c1","c2","c3","c4"]);userinfochart=main.buildChart(ctx,type,label,datavalue,bgColor,null)}},getUserInfoRecords=function(filter){filter||(filter="today");var request={methodname:"report_lmsace_reports_get_chart_reports",args:{filter:filter,chartid:"siteuserswidget"}},promise=AJAX.call([request])[0];promise.done((function(result){updateChartData(result)})),LoadIcon.addIconToContainerRemoveOnCompletion(loadiconElement,promise)},updateChartData=function(data){userinfochart.data.labels=data.label,userinfochart.data.datasets[0].data=data.value,userinfochart.update()};return{init:function(main){if("undefined"==typeof siteusers)return null;var label=siteusers.label,datavalue=siteusers.value;return showVisitChart(main,label,datavalue),$(".user-info-block  .dropdown-menu a").click((function(){var selText=$(this).text(),filter=$(this).attr("value");$(this).parents(".dropdown").find("#daterangefiltermenu").html(selText+' <span class="caret"></span>'),getUserInfoRecords(filter)})),!0}}}));

//# sourceMappingURL=usersinfo.min.js.map